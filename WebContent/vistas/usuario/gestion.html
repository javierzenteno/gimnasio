<form name="formulario" role="form" id="formulario" method="post" action="../usuario/guardar" data-fv-excluded="disabled" data-fv-icon-valid="glyphicon glyphicon-ok" 
	data-fv-icon-invalid="glyphicon glyphicon-remove" data-fv-icon-validating="glyphicon glyphicon-refresh">                       
<div class="modal modal-primary fade" id="modalAdicionar" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content" >
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Adicionar Nueva Persona</h4>
      </div>
      	<div class="modal-body">
             <div class="row">
             <div class="col-lg-3">
             	<div class="form-group">
                 <label>CI</label>
                 <input type="text" class="form-control" id="ciper" name="ciper" data-fv-notempty="true" data-fv-stringlength="true" data-fv-stringlength-max="9" data-fv-stringlength-min="7" placeholder="ingrese cedula de identidad">
               </div>
             </div>
             <div class="col-lg-9">
             	<div class="form-group">
                 <label>Nombre</label>
                 <input type="text" class="form-control" id="nomper" name="nomper" data-fv-notempty="true" placeholder="ingrese nombres">
               </div>
             </div>
             </div>
             <div class="row">
             <div class="col-lg-4">
             	<div class="form-group">
               	<label>Primer Apellido</label>
               	<input type="text" class="form-control" id="priapper" name="priapper" data-fv-notempty="true" placeholder="ingrese primer apellido">
             	</div>
             </div>
             <div class="col-lg-4">
             	<div class="form-group">
               		<label>Segundo Apellido</label>
               		<input type="text" class="form-control" id="segapper" name="segapper" placeholder="ingrese segundo apellido">
             	</div>
             </div>
             <div class="col-lg-4">
             <div class="form-group">
             <label>Fecha de Nacimiento</label>
             <div class="input-group">
             <input type="text" class="form-control" id="fecnacper" name="fecnacper" data-fv-notempty="true" placeholder="dd/mm/yyyy">
             <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
             </div>
             </div>
             </div>
             </div>
             <div class="row">
             <div class="col-lg-3">
             	<div class="form-group">
               		<label>Telefono</label>
               		<input type="text" class="form-control" id="telper" name="telper" data-fv-notempty="true" placeholder="ingrese telefono" data-fv-phone="true" data-fv-phone-country="AE" data-fv-phone-message="Introduzca un numero de telefono valido" value="+591">
             	</div>
             </div>
             <div class="col-lg-3">
             	<div class="form-group">
               		<label>Genero</label>
               		<div class="input-group">
							<label><input type="radio" name="genper" value="true" data-fv-notempty="true"> Masculino</label> 
							<label><input type="radio" name="genper" value="false">Femenino</label>
					</div>
             	</div>
             </div>
             <div class="col-lg-6">
             	<div class="form-group">
               		<label>Correo Electronico</label>
               		<input type="email" class="form-control" id="dirper" name="dirper" data-fv-notempty="true" placeholder="ingrese correo electronico">
             	</div>
             </div>
             </div>             
		</div>
      <div class="modal-footer">
        <button type="button" id="btnAdicionarConfirmacion" class="btn btn-social btn-primary"><i class="glyphicon glyphicon-floppy-disk"></i> Guardar</button>
        <button type="button" class="btn btn-social btn-primary" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> Cancelar</button>
      </div>
    </div>
  </div>
</div>
<div class="modal modal-primary fade" id="modalAdicionarConfirmacion" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog modal-sm"  role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Mensaje de Confirmacion</h4>
      </div>
      <div class="modal-body">
      			<label>Esta seguro de adicionar a esta Persona?</label>
			</div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-social btn-primary"><i class="glyphicon glyphicon-ok"></i> Si</button>
        <button type="button" class="btn btn-social btn-primary" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> No</button>
      </div>
    </div>
  </div>
</div>
</form>
<form name="formularioModificar" role="form" id="formularioModificar" method="post" action="../usuario/actualizar" data-fv-excluded="disabled"
	data-fv-icon-valid="glyphicon glyphicon-ok" data-fv-icon-invalid="glyphicon glyphicon-remove" data-fv-icon-validating="glyphicon glyphicon-refresh">
<div class="modal modal-primary fade" id="modalModificar" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog modal-lg"role="document">
    <div class="modal-content" >
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Modificar Persona</h4>
      </div>
	<div class="modal-body">
		<input  type="hidden" name="codper" id="codper" />
         	   <div class="row">
               <div class="col-lg-3">
               	<div class="form-group">
                   <label>CI</label>
                   <input type="text" class="form-control" id="ciper1" name="ciper" data-fv-notempty="true" readonly="readonly">
                 </div>
               </div>
               <div class="col-lg-9">
               	<div class="form-group">
                   <label>Nombre</label>
                   <input type="text" class="form-control" id="nomper" name="nomper" data-fv-notempty="true">
                 </div>
               </div>
               </div>
             <div class="row">
             <div class="col-lg-4">
             	<div class="form-group">
               	<label>Primer Apellido</label>
               	<input type="text" class="form-control" id="priapper" name="priapper" data-fv-notempty="true">
             	</div>
             </div>
             <div class="col-lg-4">
             	<div class="form-group">
               		<label>Segundo Apellido</label>
               		<input type="text" class="form-control" id="segapper" name="segapper" >
             	</div>
             </div>
             <div class="col-lg-4">
	             <div class="form-group">
	             <label>Fecha de Nacimiento</label>
	             <div class="input-group">
	             <input type="text" class="form-control" id="fecnacper1" name="fecnacper" data-fv-notempty="true" >
	             <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
	             </div>
	             </div>
             </div>
             </div>
             <div class="row">
             <div class="col-lg-3">
             	<div class="form-group">
               		<label>Telefono</label>
               		<input type="text" class="form-control" id="telper" name="telper" data-fv-notempty="true" data-fv-phone="true" data-fv-phone-country="AE" data-fv-phone-message="Introduzca un numero de telefono valido">
             	</div>
             </div>
             <div class="col-lg-3">
             	<div class="form-group">
               		<label>Genero</label>
               		<div class="input-group">
							<label><input type="radio" name="genper" value="true" data-fv-notempty="true"> Masculino</label> 
							<label><input type="radio" name="genper" value="false">Femenino</label>
					</div>
             	</div>
             </div>
             <div class="col-lg-6">
             	<div class="form-group">
               		<label>Correo Electronico</label>
               		<input type="email" class="form-control" id="dirper1" name="dirper" data-fv-notempty="true">
             	</div>
             </div>
             </div>
	</div>
	<div class="modal-footer">
        <button type="button" id="btnModificarConfirmacion" class="btn btn-social btn-primary"><i class="glyphicon glyphicon-floppy-disk"></i> Guardar</button>
        <button type="button" class="btn btn-social btn-primary" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> Cancelar</button>
    </div>
    </div>
  </div>
</div>

<div class="modal modal-primary fade" id="modalModificarConfirmacion" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog modal-primary modal-sm"  role="document">
    <div class="modal-content" >
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Mensaje de Confirmacion</h4>
      </div>
      <div class="modal-body">
      			<label>Esta seguro de modificar a esta Persona?</label>
			</div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-social btn-primary"><i class="glyphicon glyphicon-ok"></i> Si</button>
        <button type="button" class="btn btn-social btn-primary" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> No</button>
      </div>
    </div>
  </div>
</div>
 </form>
<div class="modal modal-primary fade" id="modalEliminar" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
<form name="formularioEliminar" role="form" id="formularioEliminar" method="post" action="../usuario/eliminar" data-fv-excluded="disabled"
	data-fv-icon-valid="glyphicon glyphicon-ok" data-fv-icon-invalid="glyphicon glyphicon-remove" data-fv-icon-validating="glyphicon glyphicon-refresh">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content" >
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Eliminar Persona</h4>
      </div>
      <div class="modal-body">
   			<input  type="hidden" id="codper" name="codper" />	
   			<div class="row">
   				<div class="col-md-9"><h3>Esta seguro que desea eliminar a : <b id="usuarioLabel"></b></h3></div>
   			</div>		
	</div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-social btn-primary"><i class="glyphicon glyphicon-ok"></i> Si</button>
        <button type="button" class="btn btn-social btn-primary" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> No</button>
      </div>
    </div>
  </div>
  </form>
</div>

<div class="modal modal-primary fade" id="modalHabilitar" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
<form name="formularioHabilitar" role="form" id="formularioHabilitar" method="post" action="../usuario/activar" data-fv-excluded="disabled"
	data-fv-icon-valid="glyphicon glyphicon-ok" data-fv-icon-invalid="glyphicon glyphicon-remove" data-fv-icon-validating="glyphicon glyphicon-refresh">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content" >
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Habilitar Persona</h4>
      </div>
      <div class="modal-body">
   			<input  type="hidden" id="codper" name="codper" />	
   			<div class="row">
   				<div class="col-md-9"><h3>Esta seguro que desea habilitar esta Persona : <b id="usuario1Label"></b></h3></div>
   			</div>		
	</div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-social btn-primary"><i class="glyphicon glyphicon-ok"></i> Si</button>
        <button type="button" class="btn btn-social btn-primary" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> No</button>
      </div>
    </div>
  </div>
  </form>
</div>
 <div class="modal modal-primary fade" id="modalAsignar" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
<form name="formularioAsignar" role="form" id="formularioAsignar" method="post" action="../usuario/asignar"	data-fv-excluded="disabled"
	data-fv-icon-valid="glyphicon glyphicon-ok" data-fv-icon-invalid="glyphicon glyphicon-remove" data-fv-icon-validating="glyphicon glyphicon-refresh">
  <div class="modal-dialog" role="document">
    <div class="modal-content" >
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Asignar Datos de Acceso</h4>
      </div>
      <div class="modal-body">
   			<input  type="hidden" id="codper" name="codper" />	
   			<div class="row">
   				<div class="col-md-9"><h3>Persona: <b id="usuario2Label"></b></h3></div>
   			</div>
   			<div class="form-group">
   				<label>Nombre de Usuario</label>
   				<input  type="text" id="login" name="login" class="form-control" data-fv-notempty="true" placeholder="ingrese usuario"/>
   			</div>
   			<div class="form-group">
   				<label>Contraseña</label>
   				<input  type="password" id="password" name="password" class="form-control" data-fv-notempty="true" placeholder="ingrese contraseña"/>
   			</div>
   			<div class="form-group">
   				<label>Repetir Contraseña</label>
   				<input  type="password" id="password1" name="password1" class="form-control" data-fv-notempty="true" placeholder="repita contraseña"
   				data-fv-identical="true" data-fv-identical-field="password"	data-fv-message="No son iguales las Contraseñas"/>
   			</div>		
	</div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary btn-social"><i class="glyphicon glyphicon-ok"></i> Aceptar</button>
        <button type="button" class="btn btn-primary btn-social" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> Cancelar</button>
      </div>
    </div>
  </div>
  </form>
</div>
<div class="modal modal-primary fade" id="modalReasignar" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
<form name="formularioReasignar" role="form" id="formularioReasignar" method="post" action="../usuario/reasignar"
		data-fv-excluded="disabled"
		data-fv-icon-valid="glyphicon glyphicon-ok"
	      data-fv-icon-invalid="glyphicon glyphicon-remove"
	      data-fv-icon-validating="glyphicon glyphicon-refresh">
  <div class="modal-dialog" role="document">
    <div class="modal-content" >
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Modificar Datos de Acceso</h4>
      </div>
      <div class="modal-body">
   			<input  type="hidden" id="codper" name="codper" />	
   			<div class="row">
   				<div class="col-md-9"><h3>Persona: <b id="usuario3Label"></b></h3></div>
   			</div>
   			<div class="form-group">
   				<label>Nombre de Usuario</label>
   				<input  type="text" id="login" name="login" class="form-control" data-fv-notempty="true" />
   			</div>
   			<div class="form-group">
   				<label>Password Anterior</label>
   				<input  type="hidden" id="password" name="password" />
   				<input  type="password" id="passwordAnt" name="passwordAnt" class="form-control" data-fv-notempty="true" 
   				data-fv-identical="true" data-fv-identical-field="password"	data-fv-message="No son iguales las Contraseñas"/>
   			</div>
   			<div class="form-group">
   				<label>Password</label>
   				<input  type="password" id="password1" name="password1" class="form-control" data-fv-notempty="true" />
   			</div>
   			<div class="form-group">
   				<label>Repetir Password</label>
   				<input  type="password" id="password2" name="password2" class="form-control" data-fv-notempty="true" 
   				data-fv-identical="true" data-fv-identical-field="password1" data-fv-message="No son iguales las Contraseñas"/>
   			</div>		
	</div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary btn-social"><i class="glyphicon glyphicon-ok"></i> Guardar</button>
        <button type="button" class="btn btn-primary btn-social" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> Cancelar</button>
      </div>
    </div>
  </div>
  </form>
</div>
<div class="modal modal-primary fade" id="modalAsignarR" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
<form name="formularioAsignarR" role="form" id="formularioAsignarR" method="post" action="../usuario/asignarr" data-fv-excluded="disabled"
	data-fv-icon-valid="glyphicon glyphicon-ok" data-fv-icon-invalid="glyphicon glyphicon-remove" data-fv-icon-validating="glyphicon glyphicon-refresh">
  <div class="modal-dialog" role="document">
    <div class="modal-content" >
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Asignar Roles a Usuario</h4>
      </div>
      <div class="modal-body">
   			<input  type="hidden" id="codper" name="codper" />	
   			<div class="row">
   				<div class="col-md-9"><h3>Usuario  <b id="usuario4Label"></b></h3></div>
   			</div>
   			<select id="roles" name="roles" multiple="multiple">
   				#foreach($r in $roles)
   				<option value="$r.codrol">$r.nomrol</option>
   				#end
   			</select>	
	</div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary btn-social"><i class="glyphicon glyphicon-ok"></i> Aceptar</button>
        <button type="button" class="btn btn-primary btn-social" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> Cancelar</button>
      </div>
    </div>
  </div>
  </form>
</div>
 <div class="modal modal-primary fade" id="modalReasignarR" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
<form name="formularioReasignarR" role="form" id="formularioReasignarR" method="post" action="../usuario/reasignarr" data-fv-excluded="disabled"
	data-fv-icon-valid="glyphicon glyphicon-ok" data-fv-icon-invalid="glyphicon glyphicon-remove" data-fv-icon-validating="glyphicon glyphicon-refresh">
  <div class="modal-dialog" role="document">
    <div class="modal-content" >
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Reasignar Roles a Usuario</h4>
      </div>
      <div class="modal-body">
   			<input  type="hidden" id="codper" name="codper" />	
   			<div class="row">
   				<div class="col-md-9"><h3>Usuario  <b id="usuario5Label"></b></h3></div>
   			</div>
   			<select id="roles2" name="roles2" multiple="multiple">
   			</select>	
	</div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-social btn-primary"><i class="glyphicon glyphicon-ok"></i> Aceptar</button>
        <button type="button" class="btn btn-social btn-primary" data-dismiss="modal"><i class="glyphicon glyphicon-remove-sign"></i> Cancelar</button>
      </div>
    </div>
  </div>
  </form>
</div>
<div class="row">
	<div class="col-lg-12">
		<div class="panel" >
			<div class="panel-heading"><h2 class="page-header" align="center">Gestion Usuarios</h2>
				<div class="row">
					<div class="col-xl-4 col-xl-offset-1 col-md-4 col-md-offset-1 col-xs-12">
						<div class="btn-group">
							<label class="btn btn-success estado"> <input  type="radio" name="estper" value="true" checked><i class="entypo-thumbs-up"></i> Activos</label> 
							<label class="btn btn-danger estado"> <input  type="radio" name="estper" value="false"><i class="entypo-thumbs-down"></i> Inactivos</label>
						</div>
					</div>
					<div class="col-xl-2 col-md-2 col-xs-4 pull-right">
						<button class="btn btn-success" id="btnAdicionar">
						<i class="fa fa-plus-square"></i> Nueva Persona</button>
					</div>
				</div>
			</div>
			<div class="panel-body" >
				<div class="dataTable_wrapper table-responsive">
					<table id="example" class="table table-bordered table-hover">
                        <thead>
                        <tr style="font-size: 10px;top: 10%;">
                        	<th width="24%">Nombre y Apellidos</th>
                        	<th width="4%">Fecha de Nacimiento</th>
                        	<th width="500px">Acciones</th>
                        </tr>
                        </thead>
                        <tbody style="font-size: 12px">
                        	
                        </tbody>
					</table>  
				</div>
			</div>
		</div>
	</div>
</div> 
                        <script type="text/javascript">
                        $(document).ready(function() {
                        	$('#fecnacper').datetimepicker({
                        		 format: 'DD/MM/YYYY',
                        		 maxDate: new Date()
                             });
                        	$('#fecnacper1').datetimepicker({
                        		 format: 'DD/MM/YYYY',
                        		 maxDate: new Date()
                             });
                        	$('select').chosen({
                        		no_results_text : "No se encuentra:",
                        		width : '100%'
                        	});
                        	$('#btnAdicionar').click(function(){
                        		$('#formulario').data('formValidation').resetForm();
                        		$('#formulario')[0].reset();
                        		$('input[name=genper][value=true]').removeAttr('checked','checked');
                        		$('input[name=genper][value=false]').removeAttr('checked','checked');
                        		document.getElementById("body").removeAttribute("style");
                        		$('#modalAdicionar').modal('show');
                        	});
                        	$('#btnAdicionarConfirmacion').click(function(){
                        		document.getElementById("body").removeAttribute("style");
                        		$('#modalAdicionarConfirmacion').modal('show');
                        	});
                        	$('#btnModificarConfirmacion').click(function(){
                        		document.getElementById("body").removeAttribute("style");
                        		$('#modalModificarConfirmacion').modal('show');
                        	});
                        	$('#example').dataTable( {
                        		"dom":"f<button> ip",
                        		"oLanguage": {
                                    "sUrl": "../../js/Spanish.lang"
                                },
                      			"processing": true,
                      		    "serverSide": true,
                      		    "ajax": {
                      		    	"type": "POST",
                      	            "url": "../usuario/lista",
                      	        	"data": function ( d ) {
                      	                d.estado = $('input[name=estper]:checked').val();
                      	            }
                              	},
                      		    "columns": [
                      		                { "data": "codper" },
                      		                { "data": "codper" },
                      		                { "data": "codper" }
                      		                                  		    ],
                      		    "createdRow": function ( row, data, index ){
                      		    	$('td',row).eq(0).html(data.nomper+' '+data.priapper+' '+data.segapper);
                      		    	$('td',row).eq(1).html(data.fecnacper);
                      		    	if(data.estper==true){
                      		    		var aux1,aux2='';
                      		    		if(data.clave>0){
                      		    			aux1='<button class="reasignar btn btn-primary btn-sm"  data-toggle="tooltip" data-placement="top" title="Reasignar Clave" data-id="'+data.codper+'"><i class="entypo-key"></button>';
                      		    		}else{
                      		    			aux1='<button class="asignar btn btn-primary btn-sm"  data-toggle="tooltip" data-placement="top" title="Asignar Clave" data-id="'+data.codper+'"><i class="entypo-lock"></i></button>';
                      		    		}
                      		    		if(data.clave>0){
                      		    			if(data.roles>0){
                      		    				aux2='<button class="reasignarr btn btn-warning btn-sm"  data-toggle="tooltip" data-placement="top" title="Reasignar Roles" data-id="'+data.codper+'"><i class="entypo-list-add"></button>';
                      		    			}else{
                      		    				aux2='<button class="asignarr btn btn-warning btn-sm"  data-toggle="tooltip" data-placement="top" title="Asignar Roles" data-id="'+data.codper+'"><i class="entypo-list"></i></button>';
                      		    			}
                      		    		}
                      		    		$('td', row).eq(2).html('<div class="btn-group"><button class="modificar btn btn-info btn-sm"  data-toggle="tooltip" data-placement="top" title="Modificar" data-id="'+data.codper+'"><i class="entypo-pencil"></i></button><button class="eliminar btn btn-danger btn-sm"  data-toggle="tooltip" data-placement="top" title="Eliminar" data-id="'+data.codper+'"><i class="entypo-trash"></i></button><button class="ver btn btn-success btn-sm"  data-toggle="tooltip" data-placement="top" title="Ver" data-id="'+data.codper+'"><i class="entypo-print"></i></button>'+aux1+' '+aux2+'</div>');
                      		    		
                      		    	}else{
                      					$('td', row).eq(2).html('<div class="btn-group"><button class="habilitar btn btn-success btn-sm"  data-toggle="tooltip" data-placement="top" title="Habilitar" data-id="'+data.codper+'"><i class="entypo-ccw"></button></div');
                      				}
                      	        },
                      	        "drawCallback": function( settings ) {	
                              		$('.modificar').click(function(){ 
                              			$('#formularioModificar').data('formValidation').resetForm();
                                		$('#formularioModificar')[0].reset();
                                		document.getElementById("body").removeAttribute("style");
                                  		$.post('../usuario/obtener?codper='+$(this).data('id'), function(result) {
                      		            	if(result.status){
                      		            		$('#modalModificar').modal('show');
                      							$('#formularioModificar').loadJSON(result.data);
                      							$('input[name=genper][value='+result.data.genper+']').attr('checked','checked');
                      							$('#dirper1').val(result.data.dirper);
                      							document.getElementById("body").removeAttribute("style");
                      		            	}else{
                      		            		mostrarMensaje('error','No se realizo con exito el Proceso');
                      		            	}
                      			        }, 'json');
                              		});
                              		$('.eliminar').click(function(){ 
                              			$('#formularioEliminar').data('formValidation').resetForm();
                                		$('#formularioEliminar')[0].reset();
                                  		$.post('../usuario/obtener?codper='+$(this).data('id'), function(result) {
                      		            	if(result.status){
                      		            		$('#modalEliminar').modal('show');
                      							$('#formularioEliminar').loadJSON(result.data);
                      							$('#usuarioLabel').html(result.data.nomper+' '+result.data.priapper+' '+result.data.segapper);
                      		            	}else{
                      		            		mostrarMensaje('error','No se realizo con exito el Proceso');
                      		            	}
                      			        }, 'json');
                              		});
                              		$('.habilitar').click(function(){ 
                              			$('#formularioHabilitar').data('formValidation').resetForm();
                                		$('#formularioHabilitar')[0].reset();
                                  		$.post('../usuario/obtener?codper='+$(this).data('id'), function(result) {
                      		            	if(result.status){
                      		            		$('#modalHabilitar').modal('show');
                      							$('#formularioHabilitar').loadJSON(result.data);
                      							$('#usuario1Label').html(result.data.nomper+' '+result.data.priapper+' '+result.data.segapper);
                      		            	}else{
                      		            		mostrarMensaje('error','No se realizo con exito el Proceso');
                      		            	}
                      			        }, 'json');
                              		});
                              		$('.asignar').click(function(){ 
                              			$('#formularioAsignar').data('formValidation').resetForm();
                                		$('#formularioAsignar')[0].reset();
                                  		$.post('../usuario/obtener?codper='+$(this).data('id'), function(result) {
                      		            	if(result.status){
                      		            		$('#modalAsignar').modal('show');
                      							$('#formularioAsignar').loadJSON(result.data);
                      							$('#usuario2Label').html(result.data.nomper+' '+result.data.priapper+' '+result.data.segapper);
                      		            	}else{
                      		            		mostrarmensaje('error','No se realizo con exito el Proceso');
                      		            	}
                      			        }, 'json');
                              		});
                              		$('.reasignar').click(function(){ 
                              			$('#formularioReasignar').data('formValidation').resetForm();
                                		$('#formularioReasignar')[0].reset();
                                  		$.post('../usuario/obtener?codper='+$(this).data('id'), function(result) {
                      		            	if(result.status){
                      		            		$('#modalReasignar').modal('show');
                      							$('#formularioReasignar').loadJSON(result.data);
                      							$('#usuario3Label').html(result.data.nomper+' '+result.data.priapper+' '+result.data.segapper);
                      						
                      		            	}else{
                      		            		mostrarmensaje('error','No se realizo con exito el Proceso');
                      		            	}
                      			        }, 'json');
                              		});
                              		$('.ver').click(function(){ 
                              			$("#frameReportes").attr("src",'../usuario/ver?codper='+$(this).data('id'));
                              			$("#reportes").modal('show');
                              		});
                              		$('.asignarr').click(function(){ 
                              			$('#formularioAsignarR').data('formValidation').resetForm();
                                		$('#formularioAsignarR')[0].reset();
                                  		$.post('../usuario/obtener?codper='+$(this).data('id'), function(result) {
                      		            	if(result.status){
                      		            		$('#modalAsignarR').modal('show');
                      							$('#formularioAsignarR').loadJSON(result.data);
                      							$('#usuario4Label').html(result.data.nomper+' '+result.data.priapper+' '+result.data.segapper);
                      							//asignar.bootstrapDualListbox('refresh');
                      		            	}else{
                      		            		mostrarMensaje('error','No se realizo con exito el Proceso');
                      		            	}
                      			        }, 'json');
                              		});
                              		$('.reasignarr').click(function(){ 
                              			$('#formularioReasignarR').data('formValidation').resetForm();
                                		$('#formularioReasignarR')[0].reset();
                                  		$.post('../usuario/obtener?codper='+$(this).data('id'), function(result) {
                      		            	if(result.status){
                      		            		$('#modalReasignarR').modal('show');
                      							$('#formularioReasignarR').loadJSON(result.data);
                      							$('#usuario5Label').html(result.data.nomper+' '+result.data.priapper+' '+result.data.segapper);
                      							$('#roles2').html('');
                      							$.each(result.roles,function(index,valor){
                      								var option=$('<option value="'+valor['codrol']+'"  '+valor['sel']+'></option>');
                      								$(option).html(valor['nomrol'])
                      								$(option).appendTo('#roles2');
                      							});
                      							$('#roles2').trigger("chosen:updated");
                      							//reasignar.bootstrapDualListbox('refresh');
                      		            	}else{
                      		            		mostrarMensaje('error','No se realizo con exito el Proceso');
                      		            	}
                      			        }, 'json');
                              		});
                              		$('button[data-toggle="tooltip"]').tooltip({animated: 'fade',placement: 'bottom',});
                              		
                      	        }
                        } );
                        
                        $('.estado').click(function(){
                        	$('#example').dataTable().fnDraw('page');
                        });
                        $('#ciper').blur(function(){
                        	  $.post('../usuario/validar?ciper='+$(this).val()	,function(resp){
                        		  if(resp.status==true){
                  					$('#ciper').val('');
                  					$('#formulario').data('formValidation').resetForm();
                  					mostrarMensaje('error','Este CI ya existe!');
                  				}
                  			});
                  		});
                        $('#ciper1').blur(function(){
                      	  $.post('../usuario/validar?ciper='+$(this).val()	,function(resp){
                      		  if(resp.status==true){
                					$('#ciper1').val('');
                					$('#formularioModificar').data('formValidation').resetForm();
                					mostrarMensaje('error','Este CI ya existe!');
                				}
                			});
                		});
                        $('#formulario,#formularioModificar,#formularioEliminar,#formularioHabilitar,#formularioAsignar,#formularioReasignar,#formularioAsignarR,#formularioReasignarR').formValidation(
                  				{locale: 'es_ES'}).on('success.form.fv', function(e) {
                              e.preventDefault();
                              var $form = $(e.target);
                              $.post($form.attr('action'), $form.serialize(), function(result) {
                              	if(result.status){
                      	            $form.data('formValidation').resetForm();
                      	          	$('#formulario')[0].reset();
                      	        	$('#formularioModificar')[0].reset();
                      	            $('#formularioEliminar')[0].reset();
                      	          	$('#formularioHabilitar')[0].reset();
                      	          	$('#formularioAsignar')[0].reset();
                      	          	$('#formularioReasignar')[0].reset();
                      	          	$('#formularioAsignarR')[0].reset();
                    	          	$('#formularioReasignarR')[0].reset();
									$('#example').dataTable().fnDraw('page');
									$('#body').css('padding-right','-17px');
									mostrarMensaje('success','Se realizo con exito el Proceso');
                      	        }else{
                              		mostrarMensaje('error','No se realizo con exito el Proceso');
                              	}
                            	$('.modal').modal('hide');
                      	    }, 'json');
                          });
                        });
                        </script>
                